<hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
    <capabilities>
        <capability>urn:ietf:params:netconf:base:1.0</capability>
    </capabilities>
</hello>
]]>]]>

<?xml version="1.0"?>
<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" xmlns:ns2="urn:com:ericsson:ecim:1.0" xmlns:ns3="http://tail-f.com/ns/netconf/actions/1.0" xmlns:ns4="urn:ietf:params:xml:ns:yang:ietf-netconf-monitoring"
    xmlns:ns5="urn:ietf:params:xml:ns:netconf:notification:1.0" message-id="0">
    <edit-config>
        <target>
            <running />
        </target>
        <config>
            <sepp-function xmlns="urn:rdns:com:ericsson:oammodel:ericsson-sepp">
                <nf-instance>
                    <name>instance_1</name>
                    <ingress-connection-profile-ref>default_ingress_connection_profile</ingress-connection-profile-ref>
                    <egress-connection-profile-ref>default_egress_connection_profile</egress-connection-profile-ref>
                    <asymmetric-key>
                        <name>asymKey</name>
                        <private-key>sc-traf-default-key1</private-key>
                        <certificate>sc-traf-default-cert1</certificate>
                    </asymmetric-key>
                    <asymmetric-key>
                        <name>asymKey_ext</name>
                        <private-key>sc-traf-default-key2</private-key>
                        <certificate>sc-traf-default-cert2</certificate>
                    </asymmetric-key>
                    <egress-connection-profile>
                        <name>default_egress_connection_profile</name>
                        <hpack-table-size>0</hpack-table-size>
                    </egress-connection-profile>
                    <telescopic-fqdn>
                        <required-for-nf-type>amf</required-for-nf-type>
                        <required-for-nf-type>smf</required-for-nf-type>
                    </telescopic-fqdn>
                    <external-network>
                        <name>externalNetwork</name>
                        <service-address-ref>vpn_external</service-address-ref>
                        <routing-case-ref>routing_from_external</routing-case-ref>
                        <roaming-partner>
                            <name>RP_BE</name>
                            <comment>Trusted roaming partner in PLMN 206-33 (RP-BE)</comment>
                            <routing-case-ref>routing_from_external</routing-case-ref>
                            <domain-name>*.region1.amf.5gc.mnc033.mcc206.3gppnetwork.org</domain-name>
                            <domain-name>*.region1.udm.5gc.mnc033.mcc206.3gppnetwork.org</domain-name>
                            <domain-name>*.region1.sepp.5gc.mnc033.mcc206.3gppnetwork.org</domain-name>
                            <trusted-certificate-list>sc-traf-root-ca-list2</trusted-certificate-list>
                            <supports-target-apiroot>true</supports-target-apiroot>
                        </roaming-partner>
                        <roaming-partner>
                            <name>RP_DE</name>
                            <comment>Trusted roaming partner in PLMN 262-72 (RP-DE)</comment>
                            <routing-case-ref>routing_from_external</routing-case-ref>
                            <domain-name>*.region1.amf.5gc.mnc072.mcc262.3gppnetwork.org</domain-name>
                            <domain-name>*.region1.udm.5gc.mnc072.mcc262.3gppnetwork.org</domain-name>
                            <domain-name>*.region1.sepp.5gc.mnc072.mcc262.3gppnetwork.org</domain-name>
                            <trusted-certificate-list>sc-traf-root-ca-list2</trusted-certificate-list>
                            <supports-target-apiroot>true</supports-target-apiroot>
                        </roaming-partner>
                    </external-network>
                    <failover-profile>
                        <name>fob1</name>
                        <request-time-budget>4000</request-time-budget>
                        <target-timeout>2000</target-timeout>
                        <preferred-host-retries-max>3</preferred-host-retries-max>
                        <target-nf-pool-reselects-max>1</target-nf-pool-reselects-max>
                        <last-resort-nf-pool-reselects-max>1</last-resort-nf-pool-reselects-max>
                        <retry-condition>
                            <http-status>500</http-status>
                            <http-status>501</http-status>
                            <http-status>502</http-status>
                            <http-status>503</http-status>
                            <http-status>504</http-status>
                            <reset>false</reset>
                            <connect-failure>false</connect-failure>
                            <refused-stream>false</refused-stream>
                        </retry-condition>
                    </failover-profile>
                    <ingress-connection-profile>
                        <name>default_ingress_connection_profile</name>
                        <max-connection-duration>10</max-connection-duration>
                        <hpack-table-size>10000</hpack-table-size>
                    </ingress-connection-profile>
                    <message-data>
                        <name>mcc_mnc_data</name>
                        <extractor-regex>(https?://)?.*5gc\.mnc(?P&lt;mnc&gt;\d+)\.mcc(?P&lt;mcc&gt;\d+)</extractor-regex>
                        <header>3gpp-Sbi-target-apiRoot</header>
                    </message-data>
                    <message-data>
                        <name>nf_data</name>
                        <extractor-regex>(https?://)?.*\.(?P&lt;nf&gt;\w+)\.5gc\.mnc</extractor-regex>
                        <header>3gpp-Sbi-target-apiRoot</header>
                    </message-data>
                    <nf-pool>
                        <name>NfUdm_pref</name>
                        <own-network-ref>internalNetwork</own-network-ref>
                        <nf-pool-discovery>
                            <name>NfUdm_pref_static</name>
                            <static-nf-instance-data-ref>NfUdm_pref_static</static-nf-instance-data-ref>
                            <update-interval>1h</update-interval>
                        </nf-pool-discovery>
                    </nf-pool>
                    <nf-pool>
                        <name>NfAmf_pref</name>
                        <own-network-ref>internalNetwork</own-network-ref>
                        <nf-pool-discovery>
                            <name>NfAmf_pref_static</name>
                            <static-nf-instance-data-ref>NfAmf_pref_static</static-nf-instance-data-ref>
                            <update-interval>1h</update-interval>
                        </nf-pool-discovery>
                    </nf-pool>
                    <nf-pool>
                        <name>sepp_RP_BE_pool</name>
                        <roaming-partner-ref>RP_BE</roaming-partner-ref>
                        <nf-pool-discovery>
                            <name>sepp_RP_BE_pool_discovery</name>
                            <static-nf-instance-data-ref>static_sepp_RP_BE_data</static-nf-instance-data-ref>
                            <update-interval>1h</update-interval>
                        </nf-pool-discovery>
                    </nf-pool>
                    <nf-pool>
                        <name>sepp_RP_DE_pool</name>
                        <roaming-partner-ref>RP_DE</roaming-partner-ref>
                        <nf-pool-discovery>
                            <name>sepp_RP_DE_pool_discovery</name>
                            <static-nf-instance-data-ref>static_sepp_RP_DE_data</static-nf-instance-data-ref>
                            <update-interval>1h</update-interval>
                        </nf-pool-discovery>
                    </nf-pool>
                    <own-network>
                        <name>internalNetwork</name>
                        <service-address-ref>vpn_internal</service-address-ref>
                        <routing-case-ref>routing_from_internal</routing-case-ref>
                        <trusted-certificate-list>sc-traf-root-ca-list1</trusted-certificate-list>
                    </own-network>
                    <routing-case>
                        <name>routing_from_external</name>
                        <message-data-ref>mcc_mnc_data</message-data-ref>
                        <message-data-ref>nf_data</message-data-ref>
                        <routing-rule>
                            <name>psepp_to_nfudm_preferred</name>
                            <condition>var.mcc==&apos;240&apos; and var.mnc==&apos;060&apos; and var.nf==&apos;udm&apos;</condition>
                            <routing-action>
                                <name>action-route-preferred</name>
                                <action-route-preferred>
                                    <failover-profile-ref>fob1</failover-profile-ref>
                                    <from-target-api-root-header/>
                                    <target-nf-pool>
                                        <nf-pool-ref>NfUdm_pref</nf-pool-ref>
                                    </target-nf-pool>
                                </action-route-preferred>
                            </routing-action>
                        </routing-rule>
                        <routing-rule>
                            <name>psepp_to_nfamf_preferred</name>
                            <condition>var.mcc==&apos;240&apos; and var.mnc==&apos;060&apos; and var.nf==&apos;amf&apos;</condition>
                            <routing-action>
                                <name>action-route-preferred</name>
                                <action-route-preferred>
                                    <failover-profile-ref>fob1</failover-profile-ref>
                                    <from-target-api-root-header/>
                                    <target-nf-pool>
                                        <nf-pool-ref>NfAmf_pref</nf-pool-ref>
                                    </target-nf-pool>
                                </action-route-preferred>
                            </routing-action>
                        </routing-rule>
                    </routing-case>
                    <routing-case>
                        <name>routing_from_internal</name>
                        <message-data-ref>mcc_mnc_data</message-data-ref>
                        <routing-rule>
                            <name>internal_to_RP_BE_csepp_rr</name>
                            <condition>var.mcc==&apos;206&apos; and var.mnc==&apos;033&apos;</condition>
                            <routing-action>
                                <name>action-route-round-robin</name>
                                <action-route-round-robin>
                                    <failover-profile-ref>fob1</failover-profile-ref>
                                    <target-roaming-partner>
                                        <roaming-partner-ref>RP_BE</roaming-partner-ref>
                                    </target-roaming-partner>
                                </action-route-round-robin>
                            </routing-action>
                        </routing-rule>
                        <routing-rule>
                            <name>internal_to_RP_DE_csepp_rr</name>
                            <condition>var.mcc==&apos;262&apos; and var.mnc==&apos;072&apos;</condition>
                            <routing-action>
                                <name>action-route-round-robin</name>
                                <action-route-round-robin>
                                    <failover-profile-ref>fob1</failover-profile-ref>
                                    <target-roaming-partner>
                                        <roaming-partner-ref>RP_DE</roaming-partner-ref>
                                    </target-roaming-partner>
                                </action-route-round-robin>
                            </routing-action>
                        </routing-rule>
                    </routing-case>
                    <service-address>
                        <name>vpn_external</name>
                        <fqdn>sepp1.region1.sepp.5gc.mnc060.mcc240.3gppnetwork.org</fqdn>
                        <port>30711</port>
                        <tls-port>32067</tls-port>
                        <ipv4-address>10.63.143.71</ipv4-address>
                        <asymmetric-key-ref>asymKey_ext</asymmetric-key-ref>
                    </service-address>
                    <service-address>
                        <name>vpn_internal</name>
                        <fqdn>sepp1.region1.sepp.5gc.mnc060.mcc240.3gppnetwork.org</fqdn>
                        <port>30711</port>
                        <tls-port>32067</tls-port>
                        <ipv4-address>10.63.143.71</ipv4-address>
                        <asymmetric-key-ref>asymKey</asymmetric-key-ref>
                    </service-address>
                    <static-nf-instance-data>
                        <name>NfUdm_pref_static</name>
                        <static-nf-instance>
                            <name>nf-seppsim-p1</name>
                            <nf-type>udm</nf-type>
                            <scp-domain/>
                            <static-nf-service>
                                <name>nudm-uecm</name>
                                <capacity>10</capacity>
                                <priority>10</priority>
                                <set-id/>
                                <address>
                                    <scheme>http</scheme>
                                    <fqdn>nfudm1.region1.udm.5gc.mnc060.mcc240.3gppnetwork.org</fqdn>
                                </address>
                            </static-nf-service>
                        </static-nf-instance>
                        <static-nf-instance>
                            <name>nf-seppsim-p2</name>
                            <nf-type>udm</nf-type>
                            <scp-domain/>
                            <static-nf-service>
                                <name>nudm-uecm</name>
                                <capacity>10</capacity>
                                <priority>10</priority>
                                <set-id/>
                                <address>
                                    <scheme>http</scheme>
                                    <fqdn>nfudm2.region1.udm.5gc.mnc060.mcc240.3gppnetwork.org</fqdn>
                                </address>
                            </static-nf-service>
                        </static-nf-instance>
                    </static-nf-instance-data>
                    <static-nf-instance-data>
                        <name>NfAmf_pref_static</name>
                        <static-nf-instance>
                            <name>nf-seppsim-p3</name>
                            <nf-type>amf</nf-type>
                            <scp-domain/>
                            <static-nf-service>
                                <name>namf-comm</name>
                                <capacity>10</capacity>
                                <priority>10</priority>
                                <set-id/>
                                <address>
                                    <scheme>http</scheme>
                                    <fqdn>nfamf.region1.amf.5gc.mnc060.mcc240.3gppnetwork.org</fqdn>
                                </address>
                            </static-nf-service>
                        </static-nf-instance>
                    </static-nf-instance-data>
                    <static-nf-instance-data>
                        <name>static_sepp_RP_BE_data</name>
                        <static-nf-instance>
                            <name>sepp_BE</name>
                            <nf-type>sepp</nf-type>
                            <nf-set-id>nf-set_1</nf-set-id>
                            <scp-domain/>
                            <static-nf-service>
                                <name>default</name>
                                <capacity>10</capacity>
                                <priority>10</priority>
                                <set-id/>
                                <address>
                                    <scheme>https</scheme>
                                    <fqdn>sepp-be.region1.sepp.5gc.mnc033.mcc206.3gppnetwork.org</fqdn>
                                </address>
                            </static-nf-service>
                        </static-nf-instance>
                    </static-nf-instance-data>
                    <static-nf-instance-data>
                        <name>static_sepp_RP_DE_data</name>
                        <static-nf-instance>
                            <name>sepp_DE</name>
                            <nf-type>sepp</nf-type>
                            <nf-set-id>nf-set_1</nf-set-id>
                            <scp-domain/>
                            <static-nf-service>
                                <name>default</name>
                                <capacity>10</capacity>
                                <priority>10</priority>
                                <set-id/>
                                <address>
                                    <scheme>https</scheme>
                                    <fqdn>sepp-de.region1.sepp.5gc.mnc072.mcc262.3gppnetwork.org</fqdn>
                                    <multiple-ip-endpoint>
                                      <name>1</name>
                                      <port>30000</port>
                                    </multiple-ip-endpoint>									
                                </address>
                            </static-nf-service>
                        </static-nf-instance>
                    </static-nf-instance-data>
                </nf-instance>
            </sepp-function>
        </config>
    </edit-config>
</rpc>
]]>]]>

