tosca_definitions_version: tosca_simple_yaml_1_2

description: VNF Descriptor for Ericsson Signaling Controller

imports:
  - etsi_nfv_sol001_vnfd_2_5_1_types.yaml
  - etsi_nfv_sol001_vnfd_deployable_modules_support.yaml
data_types:
  ericsson.datatypes.nfv.VnfInfoModifiableAttributes:
    derived_from: tosca.datatypes.nfv.VnfInfoModifiableAttributes
    properties:
      extensions:
        type: ericsson.datatypes.nfv.VnfInfoModifiableAttributesExtensions
  ericsson.datatypes.nfv.VnfInfoModifiableAttributesExtensions:
    derived_from: tosca.datatypes.nfv.VnfInfoModifiableAttributesExtensions
    properties:
      vnfControlledScaling:
        type: map # key: aspectId
        description: Represents for each aspect the controlled scaling method, either Manual or CISM (HPA) controlled.
        required: false
        entry_schema:
          type: string
          constraints:
            - valid_values: [ "ManualControlled", "CISMControlled" ]
        default: { agent_scaling: "ManualControlled", fdr_scaling: "ManualControlled", scp_worker_scaling: "ManualControlled", sepp_worker_scaling: "ManualControlled", slf_scaling: "ManualControlled", rlf_scaling: "ManualControlled", nlf_scaling: "ManualControlled", stm_diameter_scaling: "ManualControlled", bsf_diameter_scaling: "ManualControlled", bsf_worker_scaling: "ManualControlled" }
      deployableModules:
        type: map
        description: Represents optional deployable_module section for enabling and disabling charts
        required: false
        entry_schema:
          type: string
          constraints:
            - valid_values: [ "enabled", "disabled" ]
        default: { eric-sc-bsf-module: "enabled" , eric-sc-scp-module: "enabled" , eric-sc-sepp-module: "enabled" , eric-sc-dsc-module: "enabled" }
  Ericsson.SC.datatypes.nfv.InstantiateVnfOperationAdditionalParameters:
    derived_from: tosca.datatypes.nfv.VnfOperationAdditionalParameters
    properties:
      global_pullsecret:
        type: string
        description: A Kubernetes secret storing the credentials for accessing the Registry hosting of all Docker image (if required)
        required: false
        metadata:
          chart_param: global.pullSecret
      global_registry_url:
        type: string
        description: URL for the Registry hosting of all Docker images
        required: true
        metadata:
          chart_param: global.registry.url
      global_licensing_sites:
        type: list
        description: 'List of the licensing sites hostname/ip/priority for NeLS N-way active configuration. Example: [{"hostname": "","ip": "", "priority": "10"}]'
        required: true
        entry_schema:
          type: json
        metadata:
          chart_param: global.licensing.sites
      bsfdiameter_enabled:
        type: boolean
        description: Enables the BSF Diameter
        required: true
        default: false
        metadata:
          chart_param: eric-bsf-diameter.enabled
      nlf_enabled:
        type: boolean
        description: Enable the NF Lookup Function (NLF)
        required: true
        default: false
        metadata:
          chart_param: eric-sc-nlf.enabled
      rlf_enabled:
        type: boolean
        description: Enable the Rate Limiting Function (RLF)
        required: true
        default: false
        metadata:
          chart_param: eric-sc-rlf.enabled
      slf_enabled:
        type: boolean
        description: Enable the Subscriber Lookup Function (SLF)
        required: true
        default: false
        metadata:
          chart_param: eric-sc-slf.enabled
      global_license_manager_domains:
        type: list
        description: 'List of the license domains Product/CustomerID/SoftwareID to register in the License Manager. Example: [{"productType": "SIGNALING_CONTROLLER","customerId": "", "swltId": ""}]'
        required: true
        entry_schema:
          type: json
        metadata:
          chart_param: global.ericsson.licensing.licenseDomains

      ##  Instantiation related parameters
      helm_client_version:
        type: string
        description: Helm version to be utilized for LCM operations
        required: false
        default: '3.8'
      skipVerification:
        type: boolean
        description: Skipping the verification of the application deployment
        required: false
        default: true
      helmNoHooks:
        type: boolean
        description: Skipping the execution of helm hooks
        required: false
        default: false
      cleanUpResources:
        type: boolean
        description: Remove the resources on the cluster that are associated with the application, including the Persistent Volume Claims (PVCs) and Persistent Volumes
        required: false
        default: false
      skipJobVerification:
        type: boolean
        description: Flag indicating whether to bypass verification of pods created as part of Job
        required: false
        default: true
      manoControlledScaling:
        type: boolean
        description: Flag that indicates how the scaling of the deployment is handled. Defaulted to false, which means the HPA handles scaling If HPAs handle the scaling, then EVNFM does not know the current replica count. The HPA may have scaled the resources based on usage.
        required: false
        default: true
      disableOpenapiValidation:
        type: boolean
        description: Flag indicating whether to validate rendered templates against the Kubernetes OpenAPI Schema
        required: false
        default: true
      applicationTimeOut:
        type: string
        description: Maximum time allocated for the application to instantiate.
        required: false
        default: '6000'
      retrieveUnsealKey:
        type: boolean
        description: determines if the application communicates with the KMS
        required: false
        default: true
      helmWait:
        type: string
        description: Maximum time allocated for the application to instantiate
        required: false
        default: '60000'
      namespace:
        type: string
        description: The namespace the application is to be deployed into
        required: false
        default: 'default'
      addNodeToOSS:
        type: boolean
        description: The value indicates whether to add the network element to ENM during instantiation.
        required: false
        default: false
      values.yaml:
        type: string
        description: This property can contain the contents of a values.yaml file in escaped json format
        required: false
      ## SC configurable parameters
      sc_cnom_fqdn:
        type: string
        description: FQDN of CNOM
        required: true
        metadata:
          chart_param: ingress.nbi.fqdn

      ## SCP configurable parameters
      scp_worker_service_loadBalancerIP:
        type: string
        description: IP address for the LoadBalancer service of scp-worker in a single-stack deployment
        required: false
        metadata:
          chart_param: eric-scp.service.worker.loadBalancerIP
      scp_worker_service_annotations_loadBalancerIPs:
        type: string
        description: IP address(es) for the LoadBalancer service of scp-worker in a single or dual stack Kubernetes cluster
        required: false
        metadata:
          chart_param: eric-scp.service.worker.annotations.loadBalancerIPs
      scp_worker_service_multiVpn_annotations_loadBalancerIPs:
        type: string
        description: IP address(es) for the LoadBalancer service of scp-worker in a single or dual stack Kubernetes cluster
        required: false
        metadata:
          chart_param: eric-scp.service.worker.multiVpn.annotations.loadBalancerIPs

      ## BSF configurable parameters
      bsf_worker_service_loadBalancerIP:
        type: string
        description: IP address for the LoadBalancer service of bsf-worker
        required: false
        metadata:
          chart_param: eric-bsf.service.worker.loadBalancerIP
      bsf_worker_service_annotations_loadBalancerIPs:
        type: string
        description: IP address(es) for the LoadBalancer service of bsf-worker in a single or dual stack Kubernetes cluster
        required: false
        metadata:
          chart_param: eric-bsf.service.worker.annotations.loadBalancerIPs
      bsf_cassandra_datacenter:
        type: string
        description: The default Cassandra Datacenter
        required: false
        default: datacenter1
        metadata:
          chart_param: eric-bsf.cassandra.datacenter

      ## BSF Diameter configurable parameters
      bsf_diameter_enable_ipv6:
        type: boolean
        description: Enable IPv6 for the BSF Diameter Service
        required: false
        default: false
        metadata:
          chart_param: eric-bsf-diameter.initialConfig.dsl.enableIPv6
      bsf_diameter_cassandra_datacenter:
        type: string
        description: The default Cassandra Datacenter
        required: false
        default: datacenter1
        metadata:
          chart_param: eric-bsf-diameter.cassandra.datacenter

      ## SEPP configurable parameters
      sepp_worker_service_loadBalancerIP:
        type: string
        description: IP address for the LoadBalancer service of sepp-worker
        required: false
        metadata:
          chart_param: eric-sepp.service.worker.loadBalancerIP
      sepp_worker_service_annotations_loadBalancerIPs:
        type: string
        description: IP address(es) for the LoadBalancer service of sepp-worker in a single or dual stack Kubernetes cluster
        required: false
        metadata:
          chart_param: eric-sepp.service.worker.annotations.loadBalancerIPs
      sepp_worker_service_multiVpn_annotations_loadBalancerIPs:
        type: string
        description: IP address(es) for the LoadBalancer service of sepp-worker in a single or dual stack Kubernetes cluster
        required: false
        metadata:
          chart_param: eric-sepp.service.worker.multiVpn.annotations.loadBalancerIPs

      ## ADP GSs

      ## Data Distributed Coordinator ED-SC
      dced_sc_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Distributed Coordinator ED SC
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-distributed-coordinator-ed-sc.persistence.persistentVolumeClaim.storageClassName

      ## Diameter configurable parameters
      stm_diameter_service_loadBalancerIP:
        type: string
        description: IP address for the LoadBalancer service of Diameter
        required: true
        metadata:
          chart_param: eric-stm-diameter.service.loadBalancerIP
      stm_diameter_enable_ipv6:
        type: boolean
        description: Enable IPv6 for the STM Diameter Service
        required: false
        default: false
        metadata:
          chart_param: eric-stm-diameter.initialConfig.dsl.enableIPv6

      ## Backup and Restore Orchestrator deployment parameters
      bro_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of BR Orchestrator
        required: true
        default: network-block
        metadata:
          chart_param: eric-ctrl-bro.persistence.persistentVolumeClaim.storageClassName

      ## Ldap server
      ldap_server_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of LDAP Server
        required: true
        default: network-block
        metadata:
          chart_param: eric-sec-ldap-server.persistence.persistentVolumeClaim.storageClassName

      ## Ingress Controller CR deployment parameters
      iccr_service_loadBalancerIP:
        type: string
        description: The OAM VIP address set for the LoadBalancer service of Ingress Controller CR
        required: true
        metadata:
          chart_param: eric-tm-ingress-controller-cr.service.loadBalancerIP
      iccr_service_externalIPv4_annotations_sharedVIPLabel:
        type: string
        description: Enable sharing VIP for IPv4 service with other services that uses same label, only used if externalIPv4.enabled set to true
        required: false 
        metadata:
          chart_param: eric-tm-ingress-controller-cr.service.annotations.sharedVIPLabel

      ## Data Distributed Coordinator ED
      dced_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Distributed Coordinator ED
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-distributed-coordinator-ed.persistence.persistentVolumeClaim.storageClassName

      ## Configuration Management Yang Provider
      cmyp_service_loadBalancerIP:
        type: string
        description: The OAM VIP address set for the LoadBalancer service of CM Yang Provider
        required: true
        metadata:
          chart_param: eric-cm-yang-provider.service.loadBalancerIP
      cmyp_service_cmNbiPorts_dscp:
        type: string
        description: The DSCP value for outbound traffic for cli and netconf.
        required: false
        metadata:
          chart_param: eric-cm-yang-provider.service.cmNbiPorts.dscp
      cmyp_enable_ipv6:
        type: boolean
        description: Enables IPv6 for CM Yang Provider deployment
        required: false
        default: false
        metadata:
          chart_param: eric-cm-yang-provider.ldap.ipv6Enabled

      ## Document Database PG deployment parameters
      dbpg_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Document Database PG
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-document-database-pg.persistentVolumeClaim.storageClassName

      ## Wide Column Database CD (BSF)
      wcdbcd_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Wide Column Database CD
        required: true
        default: network-block
        metadata:
          chart_param: eric-bsf-wcdb-cd.persistence.dataVolume.persistentVolumeClaim.storageClassName
      wcdbcd_remoteSeedNodes:
        type: list
        description: List of remote seed nodes. Specified by IP address or hostname. Must resolve to externally routable peers in all DCs.
        required: false
        entry_schema:
          type: string
        metadata:
          chart_param: eric-bsf-wcdb-cd.cassandra.remoteSeedNodes
      wcdbcd_datacenter:
        type: json
        description: WCDBCD datacenter configuration.
        required: false
        metadata:
          chart_param: eric-bsf-wcdb-cd.dataCenters

      ## Fault Handling SNMP Alarm Provider
      snmp_alarm_provider_service_loadBalancerIP:
        type: string
        description: The OAM VIP address set for the LoadBalancer service of SNMP Alarm Provider
        required: true
        metadata:
          chart_param: eric-fh-snmp-alarm-provider.service.loadBalancerIP
      snmp_alarm_provider_service_secret:
        type: string
        description: The name of the Kubernetes secret object containing the SNMP trap targets. Set this parameter if SNMP trap targets are defined.
        required: true
        metadata:
          chart_param: eric-fh-snmp-alarm-provider.service.secretName
      snmp_alarm_provider_sourceIdentifierType:
        type: integer
        description: The SNMP IP Identifier Type with possible values being 0(Unknown), 1(IPV4), 2(IPV6)
        required: false
        default: 1
        metadata:
          chart_param: eric-fh-snmp-alarm-provider.sourceIdentifierType
      snmp_alarm_provider_sourceIdentifier:
        type: string
        description: SNMP Source IP Identifier in IPv4 or IPv6 format
        required: false
        default: 127.0.0.1
        metadata:
          chart_param: eric-fh-snmp-alarm-provider.sourceIdentifier

      ## PM Server configurable parameters
      pms_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of PM Server
        required: true
        default: network-block
        metadata:
          chart_param: eric-pm-server.server.persistentVolume.storageClass

      ## Data Search Engine
      search_engine_data_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Data Search Engine data container
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-search-engine.persistence.data.persistentVolumeClaim.storageClassName
      search_engine_master_storage_class:
        type: string
        description: OAM storage class to use for the persistent volume of Data Search Engine master container
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-search-engine.persistence.master.persistentVolumeClaim.storageClassName
      search_engine_enable_ipv6:
        type: boolean
        description: Enable IPv6 network protocol for Data Search Engine
        required: false
        default: false
        metadata:
          chart_param: eric-data-search-engine.service.network.protocol.IPv6

      ## PM Bulk Reporter configurable parameters
      pmbr_use_ipv6_dns:
        type: boolean
        description: Enables the usage of IPv6 DNS to contact LDAP
        required: false
        default: false
        metadata:
          chart_param: eric-pm-bulk-reporter.userConfig.ldap.useIPv6DNSFirst
      pmbr_persistentVolumeClaim_storageClassName:
        type: string
        description: Storage class name of the PM Bulk Reporter's PVC
        required: true
        default: network-block
        metadata:
          chart_param: eric-pm-bulk-reporter.persistentVolumeClaim.storageClassName
      pmbr_service_loadBalancerIP:
        type: string
        description: IP address to assign to load balancer (if supported)
        required: true
        metadata:
          chart_param: eric-pm-bulk-reporter.service.loadBalancerIP

      ## Object Storage MN deployment parameters
      osmn_persistence_volume_claim_storage_class:
        type: string
        description: The storage class name for persistent volume
        required: true
        default: network-block
        metadata:
          chart_param: eric-data-object-storage-mn.persistence.persistentVolumeClaim.storageClassName

      ## SFTP Server
      sftp_service_loadBalancerIP:
        type: string
        description: The OAM VIP address set for the LoadBalancer service of SFTP Server
        required: true
        metadata:
          chart_param: eric-data-sftp-server.service.loadBalancerIP
      sftp_ldap_lookup_family_order:
        type: string
        description: Address family used first at DNS lookup
        required: false
        default: ipv4_first
        metadata:
          chart_param: eric-data-sftp-server.userManagement.ldap.lookupFamilyOrder

      ## Application Sys Info Handler
      asih_asih_applicationId:
        type: string
        description: Instance identify from OAM NBI point of view, as show in the externalOaM interfaces and exposed OAM data.
        required: true
        default: sc-testnode
        metadata:
          chart_param: eric-si-application-sys-info-handler.asih.applicationId
      asih_applicationInfoService_port:
        type: integer
        description: Port for Nels connection
        required: true
        default: 9095
        metadata:
          chart_param: eric-si-application-sys-info-handler.applicationInfoService.port

      ## Add node to OSS
      ossTopology.managedElementId:
        type: string
        description: The name the SC instance will have in ENM
        required: false
      ossTopology.disableLdapUser:
        type: boolean
        description: Whether to enable or disable node remote authentication with ENM COM-AA. If the parameter is not provided, the default is enable.
        constraints: [ valid_values: [  true, false ] ]
        required: false
        default: true
      ossTopology.networkElementType:
        type: string
        description: The network element type "SC".
        required: false
        default: 'SC'
      ossTopology.networkElementVersion:
        type: string
        description: The Version of the Network Element. This is the version indicated in the Product Info for this network element.
                     It is mandatory when addNodeToOSS parameter is set to true.
        required: false
      ossTopology.networkElementUsername:
        type: string
        description: Username to access the SC instance by ENM.
        required: false
      ossTopology.networkElementPassword:
        type: string
        description: Password to access the SC instance by ENM. For security reasons, this value must be Base64 encoded.
        required: false
      ossTopology.nodeIpAddress:
        type: string
        description: The O&M IP Address of the Network Element.
        required: false
      ossTopology.communityString:
        type: string
        description: Community string for SNMP.  If not provided,default string "enm-public" is set.
        required: false
      ossTopology.snmpPort:
        type: string
        description: SNMP port.
        required: false
        default: '161'
      ossTopology.snmpVersion:
        type: string
        description: SNMP Version.
        constraints: [ valid_values: [ 'SNMP_V2C', 'SNMP_V3' ] ]
        required: false
      ossTopology.snmpSecurityLevel:
        type: string
        description: applicable in case SNMP V3 is selected
        constraints: [ valid_values: [ 'AUTH_PRIV', 'AUTH_NO_PRIV', 'NO_AUTH_NO_PRIV' ] ]
        required: false
      ossTopology.snmpSecurityName:
        type: string
        description: applicable in case SNMP V3 is selected
        required: false
      ossTopology.snmpAuthProtocol:
        type: string
        description: Authentication protocol used to authorize the identity of user.
                     Applicable in case SNMP V3 is selected and the security level is either AUTH_NO_PRIV or AUTH_PRIV
        constraints: [ valid_values: [  'SHA1', 'MD5' ] ]
        required: false
      ossTopology.snmpPrivProtocol:
        type: string
        description: Authentication protocol used to authorize the identity of user.
                     Applicable in case SNMP V3 is selected and the security level is either AUTH_NO_PRIV or AUTH_PRIV
        constraints: [ valid_values: [  'AES128', 'DES' ] ]
        required: false
      ossTopology.snmpAuthPassword:
        type: string
        description: Applicable in case SNMP V3 is selected and the security level is AUTH_NO_PRIV or AUTH_PRIV.
                     Password set for authentication with the provided Authentication Protocol for secure authorization.
        required: false
      ossTopology.snmpPrivacyPassword:
        type: string
        description: Applicable in case SNMP V3 is selected and the security level is AUTH_NO_PRIV or AUTH_PRIV.
                     Password set for authentication with the provided Authentication Protocol for secure authorization.
        required: false
      ossTopology.pmFunction:
        type: boolean
        description: PmFunction is used to switch on and off PMIC Mediation flows for each Network Element.
                     If PmFunction is on, all file collection, subscription activation, subscription deactivation,
                     scanner polling and scanner master functionality is available for the Network Element.
        constraints: [ valid_values: [  true, false ] ]
        default: true
        required: false
      ossTopology.cmNodeHeartbeatSupervision:
        type: boolean
        description: Used only in case of ENM. Enabling CM Supervision will copy the current status of the configuration data of the node into ENM and
                     enable CM Notifications. Enabling CM Notifications ensures that the node will notify ENM of any configuration data changes.
        constraints: [ valid_values: [  true, false ] ]
        required: false
        default: false
      ossTopology.fmAlarmSupervision:
        type: boolean
        description: FmAlarmSupervision is used to enable or disable alarms in case of any failures.
        constraints: [ valid_values: [  true, false ] ]
        required: false
        default: true
      ossTopology.netConfPort:
        type: string
        description: Netconf port. If not provided, default value '830' will be used.
        required: false
        default: '830'
      ossTopology.sftpPort:
        type: string
        description: SFTP port.
        required: false
      ossTopology.subNetworks:
        type: string
        description: SubNetwork is used for logical grouping of nodes within ENM.
        required: false
      ossTopology.ossServerHostname:
        type: string
        description:  hostname for scripting cluster VM in ENM.
        required: false
      ossTopology.timeZone:
        type: string
        description:  local time zone of the node. Use the following command to get the appropriate value "cmedit describe NetworkElement.timeZone" in ENM.
        required: false
      ossTopology.sshPortNo:
        type: string
        description: SSH Port Number. If not provided, default is used.
        required: false
      ossTopology.ftpPortNo:
        type: string
        description: FTP Port Number. If not provided, default is used.
        required: false
      ossTopology.transportProtocol:
        type: string
        description:  transport protocol.
        constraints: [ valid_values: [  'SSH', 'TLS' ] ]
        required: false
        default: 'SSH'

  Ericsson.SC.datatypes.nfv.ChangePackageVnfOperationAdditionalParameters:
    derived_from: tosca.datatypes.nfv.VnfOperationAdditionalParameters
    properties:
      # EVNFM specific parameters
      helm_client_version:
        type: string
        description: Helm version to be utilized for LCM operations
        required: false
        default: '3.8'
      persistScaleInfo:
        type: boolean
        description: persists the scale information from previous state
        required: false
        default: true
      skipVerification:
        type: boolean
        description: Skipping the verification of the application deployment
        required: false
        default: true
      helmNoHooks:
        type: boolean
        description: Skipping the execution of helm hooks
        required: false
        default: false
      skipJobVerification:
        type: boolean
        description: Flag indicating whether to bypass verification of pods created as part of Job
        required: false
        default: true
      skipMergingPreviousValues:
        type: boolean
        description: Flag indicating whether to skip merging values from previous release during the upgrade operation
        required: false
        default: true
      disableOpenapiValidation:
        type: boolean
        description: Flag indicating whether to validate rendered templates against the Kubernetes OpenAPI Schema
        required: false
        default: true
      applicationTimeOut:
        type: string
        description: Maximum time allocated for the application to instantiate.
        required: false
        default: '6000'
      isAutoRollbackAllowed:
        type: boolean
        description: This field set to false will disable auto-rollback after failed upgrade.
        required: false
        default: false
      upgrade.downsize.allowed:
        type: boolean
        description: Flag to indicate that a non rolling upgrade will be performed and all replicas and replicasets will be set to zero before the upgrade
        required: false
        default: false
      values.yaml:
        type: string
        description: This property can contain the contents of a values.yaml file in escaped json format
        required: false

  Ericsson.SC.datatypes.nfv.TerminateVnfOperationAdditionalParameters:
    derived_from: tosca.datatypes.nfv.VnfOperationAdditionalParameters
    properties:
      skipVerification:
        type: boolean
        description: Skipping the verification of the application termination
        required: false
        default: true
      skipJobVerification:
        type: boolean
        description: Flag indicating whether to bypass verification of pods created as part of Job
        required: false
        default: false
      cleanUpResources:
        type: boolean
        description: Remove the resources on the cluster that are associated with the application, including the Persistent Volume Claims (PVCs) and Persistent Volumes
        required: false
        default: false
      applicationTimeOut:
        type: string
        description: Maximum time allocated for the application to terminate.
        required: false
        default: '6000'

node_types:
  Ericsson.SC:
    derived_from: tosca.nodes.nfv.VNF
    properties:
      descriptor_id:
        type: string
        constraints:
          - valid_values: [ <current-id> ]
        default: <current-id>
      descriptor_version:
        type: string
        constraints:
          - valid_values: [ <current-version> ]
        default: <current-version>
      provider:
        type: string
        constraints:
          - valid_values: [ Ericsson ]
        default: Ericsson
      product_name:
        type: string
        constraints:
          - valid_values: [ 'Signaling_Controller' ]
        default: 'Signaling_Controller'
      software_version:
        type: string
        constraints:
          - valid_values: [ <sc-version> ]
        default: <sc-version>
      vnfm_info:
        type: list
        entry_schema:
          type: string
          constraints:
            - valid_values: [ '3881:E-VNFM' ]
        default: [ '3881:E-VNFM' ]
      flavour_id:
        type: string
        constraints:
        - valid_values: [default]
        default: default
      flavour_description:
        type: string
        default: ''
      modifiable_attributes:
        type: tosca.datatypes.nfv.VnfInfoModifiableAttributes
    interfaces:
      Vnflcm:
        type: tosca.interfaces.nfv.Vnflcm
        instantiate:
          inputs:
            helm_packages:
              type: list
              entry_schema:
                type: string
              required: true
              description: list of all helm charts
            additional_parameters:
              type: Ericsson.SC.datatypes.nfv.InstantiateVnfOperationAdditionalParameters
              required: false
        terminate:
          inputs:
            additional_parameters:
              type: Ericsson.SC.datatypes.nfv.TerminateVnfOperationAdditionalParameters
              required: false
        change_package:
          inputs:
            additional_parameters:
              type: Ericsson.SC.datatypes.nfv.ChangePackageVnfOperationAdditionalParameters
              required: false
        scale: {}
    artifacts:
      crd_package1:
        description: CERTM CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-sec-certm-crd>
      crd_package2:
        description: SIP-TLS CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-sec-sip-tls-crd>
      crd_package3:
        description: ICCR CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-tm-ingress-controller-cr-crd>
      crd_package4:
        description: WCDBCD CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-data-wide-column-database-cd-crd>
      crd_package5:
        description: KEY VALUE DB RD CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-key-value-db-crd>
      crd_package6:
        description: SENP nVIP CRD Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-tm-senp-nvip-crd>
      helm_package1:
        description: CNCS Base Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-cloud-native-base>
      helm_package2:
        description: CNCS NF Additions Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-cloud-native-nf-additions>
      helm_package3:
        description: SC Common Services Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-sc-cs>
      helm_package4:
        description: BSF Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-bsf>
      helm_package5:
        description: SCP Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-scp>
      helm_package6:
        description: SEPP Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-sepp>
      helm_package7:
        description: DSC Helm package associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/<eric-dsc>
      software_images:
        description: Location of the software images being used in this package
        type: tosca.artifacts.nfv.SwImage
        file: Files/images/docker.tar
      scaling_mapping:
        description: Scaling Mapping file associated with this descriptor
        type: tosca.artifacts.File
        file: Definitions/OtherTemplates/scaling_mapping.yaml

topology_template:
  inputs:
    modifiable_attributes:
      type: ericsson.datatypes.nfv.VnfInfoModifiableAttributes
  node_templates:
    eric-sc-bsf-module:
      type: "tosca.nodes.nfv.DeployableModule"
      properties:
        name: "eric-sc-bsf-module"
        description: "ERIC-SC-BSF module"
        associatedArtifacts:
          - crd_package1
          - crd_package2
          - crd_package3
          - crd_package4
          - crd_package5
          - crd_package6
          - helm_package1
          - helm_package2
          - helm_package3
          - helm_package4
    eric-sc-scp-module:
      type: "tosca.nodes.nfv.DeployableModule"
      properties:
        name: "eric-sc-scp-module"
        description: "ERIC-SC-SCP module"
        associatedArtifacts:
          - crd_package1
          - crd_package2
          - crd_package3
          - crd_package5
          - crd_package6
          - helm_package1
          - helm_package2
          - helm_package3
          - helm_package5
    eric-sc-sepp-module:
      type: "tosca.nodes.nfv.DeployableModule"
      properties:
        name: "eric-sc-sepp-module"
        description: "ERIC-SC-SEPP module"
        associatedArtifacts:
          - crd_package1
          - crd_package2
          - crd_package3
          - crd_package5
          - crd_package6
          - helm_package1
          - helm_package2
          - helm_package3
          - helm_package6
    eric-sc-dsc-module:
      type: "tosca.nodes.nfv.DeployableModule"
      properties:
        name: "eric-sc-dsc-module"
        description: "ERIC-SC-DSC module"
        associatedArtifacts:
          - crd_package1
          - crd_package2
          - crd_package3
          - crd_package4
          - crd_package5
          - crd_package6
          - helm_package1
          - helm_package2
          - helm_package3
          - helm_package7
    eric-scp-worker:
      type: "tosca.nodes.nfv.Vdu.Compute"
      properties:
        name: "eric-scp-worker"
        description: "eric-scp-worker"
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 50
    eric-sepp-worker:
      type: "tosca.nodes.nfv.Vdu.Compute"
      properties:
        name: "eric-sepp-worker"
        description: "eric-sepp-worker"
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 50
    eric-sc-slf:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-sc-slf
        description: eric-sc-slf
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 30
    eric-sc-rlf:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-sc-rlf
        description: eric-sc-rlf
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 40
    eric-sc-nlf:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-sc-nlf
        description: eric-sc-nlf
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 40
    eric-stm-diameter:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-stm-diameter
        description: eric-stm-diameter
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 50
    eric-bsf-diameter:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-bsf-diameter
        description: eric-bsf-diameter
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 50
    eric-bsf-worker:
      type: tosca.nodes.nfv.Vdu.Compute
      properties:
        name: eric-bsf-worker
        description: eric-bsf-worker
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 50
    eric-dsc-agent:
      type: "tosca.nodes.nfv.Vdu.Compute"
      properties:
        name: "eric-dsc-agent"
        description: "DSC Agent service"
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 60
    eric-dsc-fdr:
      type: "tosca.nodes.nfv.Vdu.Compute"
      properties:
        name: "eric-dsc-fdr"
        description: "DSC Frontend service"
        vdu_profile:
          min_number_of_instances: 2
          max_number_of_instances: 60
    SC:
      type: Ericsson.SC
      properties: 
        modifiable_attributes: { get_input: modifiable_attributes }
      interfaces:
        Vnflcm:
          instantiate:
            inputs:
              helm_packages: [ get_artifact: [SELF, crd_package1], get_artifact: [SELF, crd_package2], get_artifact: [SELF, crd_package3], get_artifact: [SELF, crd_package4], get_artifact: [SELF, crd_package5], get_artifact: [SELF, crd_package6], get_artifact: [SELF, helm_package1], get_artifact: [SELF, helm_package2] , get_artifact: [SELF, helm_package3] , get_artifact: [SELF, helm_package4] , get_artifact: [SELF, helm_package5] , get_artifact: [SELF, helm_package6] , get_artifact: [SELF, helm_package7] ]
          change_package:
            inputs:
              helm_packages: [ get_artifact: [SELF, crd_package1], get_artifact: [SELF, crd_package2], get_artifact: [SELF, crd_package3], get_artifact: [SELF, crd_package4], get_artifact: [SELF, crd_package5], get_artifact: [SELF, crd_package6], get_artifact: [SELF, helm_package1], get_artifact: [SELF, helm_package2] , get_artifact: [SELF, helm_package3] , get_artifact: [SELF, helm_package4] , get_artifact: [SELF, helm_package5] , get_artifact: [SELF, helm_package6] , get_artifact: [SELF, helm_package7] ]
          # terminate: {}
          scale: {}
        # Commented out due to DND-30818
        # EricssonChangeCurrentVnfPackage:
          # inputs:
            # # these are global variables apply to all operations, can be overridden
            # ## This pattern states the rollback order:
            # rollback_pattern: [helm_package: rollback]
            # ## This pattern explains the rollback in case of upgrade failure, upgrade can fail in any helm chart
            # rollback_at_failure_pattern: [
              # helm_package: 'helm_package: rollback'
            # ]
  policies:
    - InstantiationLevels:
        type: tosca.policies.nfv.InstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              description: Instantiation level of all the scalable services
              scale_info:
                agent_scaling:
                  scale_level: 0
                fdr_scaling:
                  scale_level: 0
                scp_worker_scaling:
                  scale_level: 0
                sepp_worker_scaling:
                  scale_level: 0
                slf_scaling:
                  scale_level: 0
                rlf_scaling:
                  scale_level: 0
                nlf_scaling:
                  scale_level: 0
                stm_diameter_scaling:
                  scale_level: 0
                bsf_diameter_scaling:
                  scale_level: 0
                bsf_worker_scaling:
                  scale_level: 0
          default_level: instantiation_level_1
    - agent_scaling_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-dsc-agent ]
    - fdr_scaling_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-dsc-fdr ]
    - scp_worker_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-scp-worker ]
    - sepp_worker_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-sepp-worker ]
    - slf_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-sc-slf ]
    - rlf_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-sc-rlf ]
    - nlf_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-sc-nlf ]
    - stm_diameter_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-stm-diameter ]
    - bsf_diameter_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-bsf-diameter ]
    - bsf_worker_instantiation_level:
        type: tosca.policies.nfv.VduInstantiationLevels
        properties:
          levels:
            instantiation_level_1:
              number_of_instances: 2
        targets: [ eric-bsf-worker ]
    - scaling_aspects:
        type: tosca.policies.nfv.ScalingAspects
        properties:
          aspects:
            agent_scaling:
              name: agent_scaling
              description: Scale level of DSC Agent service
              max_scale_level: 58
              step_deltas:
                - delta_1
            fdr_scaling:
              name: fdr_scaling
              description: Scale level of DSC Frontend service
              max_scale_level: 58
              step_deltas:
                - delta_1
            scp_worker_scaling:
              name: scp_worker_scaling
              description: Scale level of SCP worker service
              max_scale_level: 48
              step_deltas:
                - delta_1
            sepp_worker_scaling:
              name: sepp_worker_scaling
              description: Scale level of SEPP worker service
              max_scale_level: 48
              step_deltas:
                - delta_1
            slf_scaling:
              name: slf_scaling
              description: Scale level of SLF service
              max_scale_level: 28
              step_deltas:
              - delta_1
            rlf_scaling:
              name: rlf_scaling
              description: Scale level of RLF service
              max_scale_level: 38
              step_deltas:
              - delta_1
            nlf_scaling:
              name: nlf_scaling
              description: Scale level of NLF service
              max_scale_level: 38
              step_deltas:
              - delta_1
            stm_diameter_scaling:
              name: stm_diameter_scaling
              description: Scale level of STM diameter service
              max_scale_level: 48
              step_deltas:
              - delta_1
            bsf_diameter_scaling:
              name: bsf_diameter_scaling
              description: Scale level of BSF diameter service
              max_scale_level: 48
              step_deltas:
              - delta_1
            bsf_worker_scaling:
              name: bsf_worker_scaling
              description: Scale level of BSF worker service
              max_scale_level: 48
              step_deltas:
              - delta_1
    - eric-dsc-agent:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-dsc-agent ]
    - eric-dsc-fdr:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-dsc-fdr ]
    - eric-scp.spec.worker:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-scp-worker ]
    - eric-sepp.spec.worker:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-sepp-worker ]
    - eric-sc-slf.spec.slf:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-sc-slf ]
    - eric-sc-rlf.spec.rlf:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-sc-rlf ]
    - eric-sc-nlf:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-sc-nlf ]
    - eric-stm-diameter:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-stm-diameter ]
    - eric-bsf-diameter:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-bsf-diameter ]
    - eric-bsf.spec.worker:
        type: tosca.policies.nfv.VduInitialDelta
        properties:
          initial_delta:
            number_of_instances: 2
        targets: [ eric-bsf-worker ]
    - eric-dsc-agent_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: agent_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-dsc-agent ]
    - eric-dsc-fdr_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: fdr_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-dsc-fdr ]
    - eric_scp_worker_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          # aspect should be one of the aspects defined in scaling_aspects.properties.aspects
          aspect: scp_worker_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-scp-worker ]
    - eric_sepp_worker_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          # aspect should be one of the aspects defined in scaling_aspects.properties.aspects
          aspect: sepp_worker_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-sepp-worker ]
    - eric_sc_slf_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: slf_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-sc-slf ]
    - eric_sc_rlf_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: rlf_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-sc-rlf ]
    - eric_sc_nlf_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: nlf_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-sc-nlf ]
    - eric_stm_diameter_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: stm_diameter_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-stm-diameter ]
    - eric_bsf_diameter_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: bsf_diameter_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-bsf-diameter ]
    - eric_bsf_worker_scaling_aspect_deltas:
        type: tosca.policies.nfv.VduScalingAspectDeltas
        properties:
          aspect: bsf_worker_scaling
          deltas:
            delta_1:
              number_of_instances: 1
        targets: [ eric-bsf-worker ]
