<hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
    <capabilities>
        <capability>urn:ietf:params:netconf:base:1.0</capability>
    </capabilities>
</hello>]]>]]>

<?xml version="1.0"?>
<rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" xmlns:ns2="urn:com:ericsson:ecim:1.0" xmlns:ns3="http://tail-f.com/ns/netconf/actions/1.0" xmlns:ns4="urn:ietf:params:xml:ns:yang:ietf-netconf-monitoring" xmlns:ns5="urn:ietf:params:xml:ns:netconf:notification:1.0" message-id="0">
  <edit-config>
    <target>
      <running/>
    </target>
      <config>
        <sepp-function xmlns="urn:rdns:com:ericsson:oammodel:ericsson-sepp">
            <nf-instance>
                <name>instance_1</name>
                <own-fqdn>sepp.ericsson.se</own-fqdn>
                <default-routing-case-ref>default_routing</default-routing-case-ref>
                <vpn>
                    <name>vpn_own</name>
                    <port>32008</port>
                    <ipv4-address>10.63.131.77</ipv4-address>
                    <tls>mutual</tls>
                </vpn>
                <own-vpn-ref>vpn_own</own-vpn-ref>
                <roaming-partner>
                    <name>RP_BE</name>
                    <comment>Trusted roaming partner in PLMN 206-33 (RP-BE)</comment>
                    <sepp-nf-pool-ref>sepp_RP_BE</sepp-nf-pool-ref>
                    <vpn-ref>vpn_own</vpn-ref>
                </roaming-partner>
                <routing-data>
                    <name>apiRoot_data</name>
                    <header>3gpp-Sbi-target-apiRoot</header>
                    <extractor-regex>(https?://)?eric-seppsim-p\d+-mcc-(?P&lt;mcc>\d+)-mnc-(?P&lt;mnc>\d+).*</extractor-regex>
                </routing-data>
                <routing-data>
                    <name>seppsim_data</name>
                    <header>3gpp-Sbi-target-apiRoot</header>
                    <extractor-regex>eric-(?P&lt;nf>seppsim-p\d+?)-.+</extractor-regex>
                </routing-data>
                <routing-case>
                    <name>default_routing</name>
                    <routing-data-ref>apiRoot_data</routing-data-ref>
                    <routing-data-ref>seppsim_data</routing-data-ref>
                    <routing-rule>
                        <name>csepp_to_RP_BE</name>
                        <condition>var.mcc=='206' and var.mnc=='33'</condition>
                        <action-roaming-partner>RP_BE</action-roaming-partner>
                    </routing-rule>
                    <routing-rule>
                        <name>psepp_to_nf_stricttarget</name>
                        <condition>var.mcc=='262' and var.mnc=='73' and (var.nf=='seppsim-p6' or var.nf=='seppsim-p7' or var.nf=='seppsim-p8')</condition>
                        <action-pool>universal_pool</action-pool>
                    </routing-rule>
                    <routing-rule>
                        <name>psepp_to_nf_trytarget</name>
                        <condition>var.mcc=='262' and var.mnc=='73'</condition>
                        <action-pool>nf_pool</action-pool>
                    </routing-rule>
                </routing-case>
                <static-nf-instance-data>
                    <name>static_nf_data</name>
                    <static-nf-instance>
                        <name>nf-seppsim-p3</name>
                        <fqdn>eric-seppsim-p3-mcc-262-mnc-73</fqdn>
                        <port>80</port>
                    </static-nf-instance>
                    <static-nf-instance>
                        <name>nf-seppsim-p4</name>
                        <fqdn>eric-seppsim-p4-mcc-262-mnc-73</fqdn>
                        <port>80</port>
                    </static-nf-instance>
                    <static-nf-instance>
                        <name>nf-seppsim-p5</name>
                        <fqdn>eric-seppsim-p5-mcc-262-mnc-73</fqdn>
                        <port>80</port>
                    </static-nf-instance>
                </static-nf-instance-data>
                <static-nf-instance-data>
                    <name>static_sepp_RP_BE</name>
                    <static-nf-instance>
                        <name>seppBE-seppsim-p1</name>
                        <fqdn>eric-seppsim-p1-mcc-206-mnc-33</fqdn>
                        <port>80</port>
                    </static-nf-instance>
                    <static-nf-instance>
                        <name>seppBE-seppsim-p2</name>
                        <fqdn>eric-seppsim-p2-mcc-206-mnc-33</fqdn>
                        <port>80</port>
                    </static-nf-instance>
                </static-nf-instance-data>
                <nf-pool>
                    <name>nf_pool</name>
                    <failover-behavior-ref>fob1</failover-behavior-ref>
                    <nf-pool-discovery>
                        <name>nf_pool_discovrey</name>
                        <static-nf-instance-data-ref>static_nf_data</static-nf-instance-data-ref>
                    </pool-discovery>
                    <routing-method>target-api-root</routing-method>
                    <priority-group>
                        <name>nf</name>
                        <priority>1</priority>
                    </priority-group>
                </pool>
                <nf-pool>
                    <name>sepp_RP_BE</name>
                    <failover-behavior-ref>fob1</failover-behavior-ref>
                    <nf-pool-discovery>
                        <name>sepp_RP_BE_pool</name>
                        <static-nf-instance-data-ref>static_sepp_RP_BE</static-nf-instance-data-ref>
                    </pool-discovery>
                    <routing-method>forward</routing-method>
                    <priority-group>
                        <name>sepp_RP_BE_subpool</name>
                        <priority>1</priority>
                    </priority-group>
                </pool>
                <nf-pool>
                    <name>universal_pool</name>
                    <failover-behavior-ref>fob1</failover-behavior-ref>
                    <routing-method>target-api-root</routing-method>
                </pool>
                <failover-behavior>
                    <name>fob1</name>
                    <request-timeout>3456</request-timeout>
                    <retry-condition>
                        <http-status>500</http-status>
                        <http-status>501</http-status>
                        <http-status>502</http-status>
                        <http-status>503</http-status>
                        <http-status>504</http-status>
                        <reset/>
                        <connect-failure/>
                        <refused-stream/>
                    </retry-condition>
                    <per-priority-retries-max>1</per-priority-retries-max>
                    <total-retries-max>3</total-retries-max>
                    <peer-timeout>2345</peer-timeout>
                </failover-behavior>
            </nf-instance>
          </sepp-function>
        </config>
    </edit-config>
</rpc>
]]>]]>

